## Product Backlog — Core + Academy (Expanded)

Columns: Ticket, Module, Category (Epic), Purpose, User Stories (Sub‑Epic), Acceptance Criteria

| Ticket | Module  | Category (Epic) | Purpose | User Stories (Sub‑Epic) | Acceptance Criteria |
|---|---|---|---|---|---|
| CORE-000 | Core | User Authentication | Securely authenticate admin users and manage admin access to the platform | As an admin, I want to securely log in to the platform and access my admin account so that I can manage and configure the platform's settings, features, and user accounts. | The system should provide a separate admin login interface distinct from regular user login.<br>The system should enforce strong password policies and multi‑factor authentication for admin accounts.<br>The system should provide a secure password reset/recovery flow that requires additional verification steps.<br>The system should automatically log out admin users after a period of inactivity (idle timeout).<br>The system should limit failed login attempts and apply lockout/rate‑limiting to prevent brute‑force attacks. |
| CORE-001 | Core | Identity & SSO | Enable single sign-on across apps | As a user, I can log in once and access Academy | The system should issue a signed JWT on successful login that is valid across apps.<br>The system should validate the JWT on all protected endpoints and reject invalid/expired tokens with 401.<br>The system should include role/permission claims or resolvable subject in the token to enable RBAC checks.<br>The system should persist a refresh token to allow session continuity per device/browser.<br>The system should record authentication events for audit (who/when/where). |
| CORE-002 | Core | Identity & SSO | Refresh token rotation | As a user, my session transparently refreshes | The system should rotate refresh tokens on each use and invalidate previous tokens.<br>The system should reject refresh attempts with expired, revoked, or compromised tokens with 401.<br>The system should enforce a configurable device/session limit per user and revoke oldest sessions when exceeded.<br>The system should expose a refresh endpoint that returns a new JWT and rotated refresh token.<br>The system should log refresh events and anomalies for audit and detection. |
| CORE-003 | Core | RBAC | Manage roles and permissions | As an admin, I can assign roles to admins | The system should provide CRUD for roles and permissions with uniqueness constraints.<br>The system should enforce permissions via guards on all admin and app endpoints.<br>The system should prevent deletion of roles/permissions that are in use or require reassignment.<br>The system should expose APIs to assign/remove roles from admins with audit entries.<br>The system should surface permission lists in a consistent, filterable format. |
| CORE-004 | Core | RBAC | Namespaced permissions | As a platform admin, I can scope per app | The system should seed namespaced permissions such as `academy.*` alongside legacy keys.<br>The system should allow guards to accept both legacy and namespaced keys during transition.<br>The system should provide documentation and a migration process for role templates to namespaced keys.<br>The system should audit permission/role changes including actor, time, and delta.<br>The system should expose APIs to query permissions by namespace. |
| CORE-005 | Core | Security | Global exception filters | As an operator, I see consistent error responses | The system should standardize error envelopes across the API with stable fields.<br>The system should redact sensitive data and stack traces in production responses.<br>The system should include a correlation/request ID in error responses and logs.<br>The system should map validation errors to clear, user-friendly messages with field paths.<br>The system should capture and log unhandled exceptions with severity metadata. |
| CORE-006 | Core | Observability | HTTP logging interceptor | As an operator, I can trace requests | The system should log method, path, status, latency, and correlation ID for requests.<br>The system should support configurable sampling and log levels per environment.<br>The system should scrub secrets and PII from logs according to policy.<br>The system should emit structured logs consumable by common log stacks (e.g., ELK).<br>The system should include error traces for 4xx/5xx with minimal overhead. |
| CORE-007 | Core | Mailer/Storage | Provide shared mail and storage | As an admin, I can trigger emails and upload assets | The system should send emails via a configured SMTP provider with retry/backoff.<br>The system should sign S3 upload URLs and enforce size/type validation server-side.<br>The system should set appropriate cache/expiry headers and object ACLs for public/private content.<br>The system should allow basic templated emails with variables and localization.<br>The system should log delivery status and surface failures for support. |
| CORE-008 | Core | Audit | Admin/audit trail | As a security officer, I can review changes | The system should record create/update/delete events with actor, timestamp, and resource identifiers.<br>The system should expose filterable audit queries by user, action, resource, and time window.<br>The system should protect audit integrity against tampering and restrict access via RBAC.<br>The system should support exporting audit logs (CSV/JSON) for compliance.<br>The system should correlate audit entries with request IDs for traceability. |
| CORE-009 | Core | Developer Experience | DTO validation baseline | As a developer, I have strong DTOs | The system should validate request bodies, params, and queries against DTO schemas.<br>The system should return informative validation errors with example fixes where applicable.<br>The system should coerce/transform basic types (dates, numbers) safely when configured.<br>The system should ensure response DTOs match documented schemas.<br>The system should generate OpenAPI docs from DTOs to keep docs in sync. |
| CORE-010 | Core | API Governance | Route namespaces | As a consumer, I see clear API paths | The system should expose academy endpoints under a `/academy/*` namespace.<br>The system should reflect namespaces in Swagger tags and grouping.<br>The system should avoid breaking changes by providing redirects or versioning when feasible.<br>The system should ensure RBAC checks remain unchanged after namespacing.<br>The system should document the namespace strategy for future apps. |
| CORE-011 | Core | User Authentication | Password policy & MFA | As an admin, I meet security requirements | The system should enforce password complexity, rotation, and reuse policies for admin accounts.<br>The system should support MFA (TOTP/email) with enrollment and recovery codes.<br>The system should require MFA at login for admins when enabled by policy.<br>The system should provide admin-configurable MFA settings per environment.<br>The system should audit MFA enrollment, challenges, and failures. |
| CORE-012 | Core | User Authentication | Account recovery | As an admin, I can securely recover access | The system should require verified email or a second factor before issuing reset tokens.<br>The system should issue signed, expiring reset links and throttle requests to prevent abuse.<br>The system should prevent username/email enumeration in recovery flows.<br>The system should invalidate previous reset tokens upon use and log recovery events.<br>The system should notify account owners of recovery attempts. |
| CORE-013 | Core | User Authentication | Session management | As an admin, I control sessions | The system should enforce idle timeouts and absolute session lifetimes.<br>The system should allow users to view and revoke active sessions/devices.<br>The system should support single-session logout and logout-all operations.<br>The system should invalidate tokens immediately upon logout/revocation.<br>The system should surface session activity in audit logs. |
| CORE-014 | Core | Security | Brute‑force protection | As an admin, my account is protected | The system should rate-limit login attempts per user/IP and introduce progressive backoff.<br>The system should lock accounts after configurable failed attempts and notify the owner.<br>The system should allow administrators to unlock accounts securely.<br>The system should support CAPTCHA/step-up verification after thresholds are exceeded.<br>The system should maintain allow/deny lists for known IPs as policy allows. |
| ACAD-001 | Academy | Programs | Program CRUD (endpoints) | As an admin, I can create/update programs | The system should provide `POST/GET/GET by id/PUT/DELETE` endpoints for programs under `/academy/programs`.<br>The system should require appropriate permissions for each operation and return 403 if missing.<br>The system should validate input fields and return 400 with detailed errors on invalid payloads.<br>The system should return 201/200 on success and 404 when records are not found.<br>The system should soft-delete records on `DELETE` and exclude them from default lists. |
| ACAD-002 | Academy | Programs | Program DTOs & validation | As a developer, I enforce program schemas | The system should define DTOs with required/optional fields and type constraints.<br>The system should validate lengths, enums, and formats (e.g., dates, numbers) per DTO.<br>The system should reject payloads with unknown fields if strict mode is enabled.<br>The system should return field-level error messages that map to DTO properties.<br>The system should document DTOs in Swagger with examples. |
| ACAD-003 | Academy | Programs | Program listing & filters | As an admin, I can filter programs | The system should support pagination with page/limit and return total counts.<br>The system should support sorting by created date, title, and status.<br>The system should filter by status, category, visibility, and date ranges.<br>The system should exclude soft-deleted records by default and include them only when requested.<br>The system should respond within agreed performance budgets under expected load. |
| ACAD-004 | Academy | Programs | Program participants assign | As an admin, I can assign participants | The system should accept a list of candidate IDs and idempotently assign them to a program.<br>The system should validate candidates and return errors for unknown or ineligible IDs.<br>The system should return a summary of created/skipped/failed assignments.<br>The system should emit optional notifications to assigned candidates when enabled.<br>The system should audit assignment operations with actor and timestamp. |
| ACAD-005 | Academy | Programs | Program soft delete/restore | As an admin, I can archive/restore | The system should mark `deleted_at` (and `deleted_by`) on soft delete and never hard-delete by default.<br>The system should exclude soft-deleted programs from lists unless `includeDeleted=true` is specified.<br>The system should provide a restore operation that clears deletion markers.<br>The system should prevent updates to soft-deleted programs until restored.<br>The system should audit delete/restore actions. |
| ACAD-006 | Academy | Webinars | Webinar CRUD (endpoints) | As an admin, I can manage webinars | The system should provide `POST/GET/GET by id/PUT/DELETE` endpoints for webinars under `/academy/webinars`.<br>Webinars are standalone resources with no direct program linkage.<br>The system should validate date fields and ensure webinar dates are not in the past for creation unless allowed.<br>The system should return appropriate status codes (201/200/404/409) with clear messages.<br>The system should require permissions per action and return 403 if missing. |
| ACAD-007 | Academy | Webinars | Webinar DTOs & validation | As a developer, I enforce webinar schemas | The system should validate `capacity` as a non‑negative integer and `speakers` as an array of strings.<br>The system should validate `link` as a URL when provided and enforce max lengths on text fields.<br>The system should validate `registration_date` <= `webinar_date` when both are present.<br>The system should document DTOs in Swagger with examples and constraints.<br>The system should return detailed field errors on invalid payloads. |
| ACAD-008 | Academy | Webinars | Webinar code/broadcast | As an admin, I can manage session codes | The system should generate a unique attendance code with configurable length and validity window, and persist codes in `academy.webinar_attendance_codes` (`valid_from`, `valid_to`).<br>The system should restrict code generation and broadcast endpoints to authorized roles/permissions.<br>The system should rate-limit broadcast operations to prevent abuse.<br>The system should reject invalid/expired/out-of-window codes and return appropriate errors.<br>The system should audit code generation and broadcast actions. |
| ACAD-009 | Academy | Enrollment | Candidate enroll to program | As a candidate, I enroll in programs | The system should enforce a unique enrollment per `(candidateId, programId)`.<br>The system should block enrollment unless the candidate has attended an eligible webinar (prerequisite), tracked via `academy.candidate_webinars.status` and `attended_at`.<br>The system should return 422 with actionable guidance when the prerequisite is unmet (e.g., suggest upcoming webinars).<br>The system should record enrollment timestamps and actor/source, including optional `source_screening_id` and `assignment_reason`.
The system should validate candidate and program existence and eligibility. |
| ACAD-010 | Academy | Enrollment | Admin assign participants | As an admin, I bulk-assign | The system should upsert enrollments for provided candidates in a single transaction.<br>The system should return a per-candidate result and an overall summary.<br>The system should skip duplicates without error and report them as such.<br>The system should enforce permissions and audit the operation.<br>The system should handle large batches within performance limits. |
| ACAD-011 | Academy | Webinar Registration | Candidate register to webinar | As a candidate, I register in webinars | The system should enforce a unique registration per `(candidateId, webinarId)`.
<br>The system should respect webinar capacity and reject when full (unless override is enabled).
<br>The system should capture attendance status and set `attended_at` upon successful check‑in via an attendance code.
<br>The system should support cancellation with appropriate updates to capacity.
<br>The system should audit registration, attendance updates, and cancellation events. |
| ACAD-012 | Academy | Permissions | Enforce academy.* permissions | As an admin, I see only authorized actions | The system should seed all required `academy.*` permissions and map them to roles.<br>The system should enforce permission checks on all Academy endpoints and return 403 on failures.<br>The system should include negative e2e tests to verify unauthorized access is blocked.<br>The system should document required permissions per endpoint in Swagger.<br>The system should provide an admin UI/API to inspect effective permissions. |
| ACAD-013 | Academy | Audit | Change history | As an auditor, I see who changed what | The system should record entity change history for programs and webinars (create/update/delete).<br>The system should expose audit queries filterable by entity, actor, and time.<br>The system should restrict audit access to authorized roles and log access attempts.<br>The system should export audit data in CSV/JSON formats.<br>The system should include request correlation IDs in audit entries. |
| ACAD-014 | Academy | DTO Coverage | List/detail DTOs | As a developer, I have typed responses | The system should define response DTOs for list and detail endpoints including pagination metadata.<br>The system should ensure DTOs reflect the actual Prisma selections to avoid overfetching.<br>The system should provide Swagger schemas and examples for all responses.<br>The system should include versioned API tags for future compatibility.<br>The system should validate serialization of arrays, dates, and nested objects. |
| ACAD-015 | Academy | E2E Tests | Program/Webinar happy paths | As an engineer, I prevent regressions | The system should include e2e tests covering CRUD happy paths and common error cases.<br>The system should run e2e tests in CI with a seeded database and isolated environment.<br>The system should fail the pipeline on test failures and provide actionable output.<br>The system should include permission boundary tests (authorized vs unauthorized).<br>The system should include soft‑delete and restore scenarios. |
| ACAD-016 | Academy | Documentation | API reference | As a consumer, I can integrate | The system should expose Swagger/OpenAPI with Academy sections grouped by resource.<br>The system should document authentication, permissions, request/response schemas, and examples.<br>The system should be accessible at a stable route (e.g., `/docs`).<br>The system should pass linting/validation (e.g., OpenAPI validators).<br>The system should version docs when breaking changes are introduced. |
| ACAD-017 | Academy | Capacity | Webinar capacity rules | As an admin, I can enforce capacity | The system should prevent registrations once capacity is reached unless an admin override is used.<br>The system should handle concurrent registrations safely without oversubscription.<br>The system should track and expose remaining seats to authorized users.<br>The system should log and audit overrides with actor and reason.<br>The system should provide clear error messages when capacity or prerequisite constraints fail. |
| ACAD-018 | Academy | Exports | Program/Webinar CSV export | As an admin, I can export data | The system should export CSVs with consistent headers and UTF‑8 encoding.<br>The system should support column selection and date range filters.<br>The system should stream large exports to avoid timeouts and memory pressure.<br>The system should protect exports behind appropriate permissions.<br>The system should include timestamps and source metadata in exports. |
| ACAD-019 | Academy | Notifications | Enrollment/Reminder emails | As a candidate/admin, I receive emails | The system should send enrollment confirmations to candidates and notifications to admins when configured.<br>The system should send webinar reminder emails (e.g., T‑1 day) with schedule details.<br>The system should provide localized templates and variables for personalization.<br>The system should retry failed deliveries and surface failures for support.<br>The system should allow opt‑out where legally required. |
| ACAD-020 | Academy | Reports | Enrollment and attendance | As a PM, I can monitor KPIs | The system should provide aggregate endpoints for enrollments and attendance over time (leveraging `candidate_programs`, `candidate_webinars`).<br>The system should support filters (program, webinar, date range, status) and return chart‑ready JSON.<br>The system should compute metrics consistently with documented definitions.<br>The system should respond within performance budgets on representative data volumes.<br>The system should allow CSV export of report datasets. |
| ACAD-021 | Academy | Screenings | Candidate screenings | As an admin, I can screen candidates | The system should create/update screening records in `academy.candidate_screenings` with links to optional source webinar and assigned program.<br>The system should support stages (e.g., applied, screened, assigned) and flags (passed test, matches requirement) with reject reasons.<br>The system should audit assignments (actor, reason) and expose list/filter endpoints.<br>The system should allow assignment of candidates to programs from screenings with provenance (`source_screening_id`).<br>The system should enforce permission checks for viewing/modifying screenings. |
| ACAD-022 | Academy | Interviews | Program interview schedules | As an admin, I can schedule interviews | The system should CRUD `academy.program_interview_schedules` (type, link/location, start/end, active).<br>The system should list schedules per program and enforce permissions.<br>The system should ensure no overlapping active slots when configured. |
| ACAD-023 | Academy | Interviews | Candidate interview enrollments | As an admin, I can enroll candidates to interviews | The system should upsert `academy.program_interview_enrollments` per candidate and schedule with uniqueness on `(candidate_id, interview_schedule_id)`.<br>The system should track status, pass/fail, score (JSON), and notes; audit created_by/updated_by.<br>The system should expose list/filter endpoints by program, schedule, status, and candidate. |
| ACAD-024 | Academy | Webinars | Candidate bookmarks | As a candidate, I bookmark webinars | The system should allow candidates to bookmark/unbookmark webinars using `academy.candidate_bookmark_webinars` with uniqueness on `(candidate_id, webinar_id)`.<br>The system should expose list of my bookmarks and optionally counts.<br>The system should enforce ownership/RBAC on bookmark endpoints. |
| ACAD-025 | Academy | Attendance | Webinar check-in via code | As a candidate, I check in to webinars | The system should validate active attendance codes (`webinar_attendance_codes.valid_from/valid_to`) and mark `candidate_webinars.status` plus `attended_at` on success.<br>The system should return clear errors for invalid/expired/out-of-window codes.<br>The system should rate-limit attempts and audit check-ins. |
| ACAD-021 | Academy | Onboarding | Gate program registration by onboarding status | As a candidate, I complete onboarding steps before registering for programs | The system should provide a candidate registration endpoint that creates a user with verified email (or pending verification per policy).<br>The system should track onboarding status with states: `registered` → `profile_incomplete` → `profile_completed` → `resume_completed`.<br>The system should expose endpoints to create/update candidate profile and validate required fields (contact, demographics per policy).<br>The system should expose endpoints to create/update resume data (education, work history, skills) and validate completeness.<br>The system should block program enrollment unless onboarding status is `resume_completed` (and still enforce webinar prerequisite when applicable), returning 422 with actionable guidance when unmet.<br>The system should expose a "my onboarding status" endpoint for UX to render progress.<br>The system should audit onboarding transitions (actor/time) and surface them in reports. |

Notes
- Refine ticket details in Jira/Azure Boards as the team sizes; this backlog is a seed.

Backlog style guidelines
- Ticket IDs are placeholders; adapt to your tracker.
- Keep Acceptance Criteria testable and observable.
- Group work by Epics (Category) to track outcomes, not just tasks.


